<!DOCTYPE html>
<html lang="ko" xmlns:th="https://www.thymeleaf.org">
  <head>
    <meta http-equiv="Content-Type" , content="text/html; charset=UTF-8" />
    <link th:href="@{/css/manager.css}" rel="stylesheet" />
    <title>Manager Page</title>
  </head>
  <header>
    <span class="title y-middle x-start">Manager Page</span>
    <div id="buttons" class="x-end y-middle">
      <form action="/products/delete" method="post">
        <input
          type="text"
          name="password"
          class="invisible"
          th:value="${password}"
        />
        <button type="submit" class="delete-buttons">전체 삭제</button>
      </form>
    </div>
  </header>
  <body>
    <table id="products" class="x-middle">
      <caption class="title">
        Product List
      </caption>
      <colgroup>
        <col />
        <col />
        <col />
        <col />
        <col />
      </colgroup>
      <thead>
        <tr>
          <th>Id</th>
          <th>Name</th>
          <th>Price</th>
          <th>Image</th>
          <th>Control</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <form action="/products/create" method="post">
            <input
              type="text"
              name="password"
              class="invisible"
              th:value="${password}"
            />
            <td><input type="number" name="id" required /></td>
            <td><input type="text" name="name" required /></td>
            <td><input type="number" name="price" required /></td>
            <td><input type="text" name="image" required /></td>
            <td>
              <button type="submit" class="normal-buttons">제품 추가</button>
            </td>
          </form>
        </tr>
        <tr th:each="product : ${products}">
          <td th:text="${product.id}">Id</td>
          <td th:text="${product.name}">Name</td>
          <td th:text="${product.price}">Price</td>
          <td th:text="${product.image}">Image</td>
          <td>
            <div class="buttons">
              <form action="/page/edit" method="post">
                <input
                  type="text"
                  name="password"
                  class="invisible"
                  th:value="${password}"
                />
                <input
                  type="number"
                  name="id"
                  class="invisible"
                  th:value="${product.id}"
                />
                <input
                  type="text"
                  name="name"
                  class="invisible"
                  th:value="${product.name}"
                />
                <input
                  type="number"
                  name="price"
                  class="invisible"
                  th:value="${product.price}"
                />
                <input
                  type="text"
                  name="image"
                  class="invisible"
                  th:value="${product.image}"
                />
                <button type="submit" class="normal-buttons">정보 변경</button>
              </form>
              <form
                th:action="@{/products/{id}/delete(id=${product.id})}"
                method="post"
              >
                <input
                  type="text"
                  name="password"
                  class="invisible"
                  th:value="${password}"
                />
                <button type="submit" class="delete-buttons">제품 삭제</button>
              </form>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
